<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AquaRiser-VR 公式ページ</title>
    <style>
        body { font-family: sans-serif; background-color: #f0f8ff; color: #333; text-align: center; padding: 50px; }
        .box { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: inline-block; text-align: left; margin: 20px; min-width: 300px; }
        h1 { color: #0066cc; }
        .online { color: #e63946; font-weight: bold; font-size: 1.5em; }
        .btn { display: inline-block; padding: 15px 30px; background-color: #0066cc; color: white; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 20px; }
        .btn:hover { background-color: #004c99; }
    </style>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, onValue, query, orderByChild, limitToFirst } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        const firebaseConfig = {
          apiKey: "AIzaSyCVmJS_Lnh1WlLyBfbLj1wTTyGzgablL5w",
          authDomain: "aquariser-vr.firebaseapp.com",
          databaseURL: "https://aquariser-vr-default-rtdb.firebaseio.com",
          projectId: "aquariser-vr",
          storageBucket: "aquariser-vr.firebasestorage.app",
          messagingSenderId: "530650981581",
          appId: "1:530650981581:web:7b72083ebaa14c052cb584",
          measurementId: "G-3SWH390YP0"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // オンライン人数のリアルタイム取得
        const onlineRef = ref(db, 'online_users');
        onValue(onlineRef, (snapshot) => {
            document.getElementById('online-count').innerText = snapshot.size;
        });

        // ランキングのリアルタイム取得
        const scoresRef = query(ref(db, 'scores'), orderByChild('neg_score'), limitToFirst(10));
        onValue(scoresRef, (snapshot) => {
            const list = document.getElementById('ranking-list');
            list.innerHTML = '';
            let rank = 1;
            snapshot.forEach((childSnapshot) => {
                const data = childSnapshot.val();
                const li = document.createElement('li');
                li.innerText = `${rank}位 ${data.name} : ${data.score}`;
                list.appendChild(li);
                rank++;
            });
        });
    </script>
</head>
<body>

    <h1>AquaRiser-VR</h1>
    <p>空を舞い、リングを潜り抜けるVRジェットパックフライトアクション</p>

    <div class="box">
        <h3>オンライン状況</h3>
        <p><span class="online" id="online-count">0</span> 人</p>
    </div>

    <div class="box">
        <h3>ランキング TOP10</h3>
        <ol id="ranking-list">
            <li>Loading...</li>
        </ol>
    </div>

    <br>
    <a href="https://github.com/Yuga-soy/AquaRiser-VR/releases" class="btn">ゲームをダウンロード (GitHub)</a>

</body>
</html>
